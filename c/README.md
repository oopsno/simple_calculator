# Simple Calculator 题解 - C 语言版本

## 第一道题

> 题目描述：解析“逆波兰表达式”法表示的一串整数四则运算。
> 样例输入：1 2 3 + *
> 样例解释：相当于 1 * (2 + 3)
> 样例输出：5
>
> 改进：支持负数(negative) ，例题 "-1 1 +"，应输出 0 
> 改进：支持浮点数(float) ，例题 "0.3 0.5 +"，相当于 0.3 + 0.5，应输出 0.8，可能有误差，不管
> 改进：支持数学常量 pi 和 e，例题 "pi"，应输出 3.1415926，我忘了精度能到多少了，不管不管能输出就行
> 改进：支持三角函数 sin cos tan，例题 "pi 4 / sin"，相当于 sin(pi / 4) ，应输出 0.5

### 分析

正确地实现这道题并非易事，对于 C
语言来说更是如此。为了让这个问题不至于过于复杂，约定

- 负数的负号与数字之间没有空格（如果有，那么对于前缀表达式而言，`-` 不是上下文无关的）
- 任意两个相邻符号之间至少有一个空格
- 无限制地使用标准库

于是，此题可分解为

- 以空格为界切分输入字符串成为独立的符号(`strtok`)
- 将每个符号从字符串解析为
  - 数字，如果看起来像
  - 函数、运算符或，如果是
- 使用一个栈模拟计算过程并给出结果

### 一些需要知道的事情

- 函数
- 结构体
- 栈是什么
- 后缀表达式是什么
- C 语言的基本输入输出
- C 语言的字符串处理

### 可能的实现

参考

- common.h
- common.c
- challenge-1.c

## 第二道题

> 题目描述：解析常见中缀表达式，实现第一道题里的所有功能。注意，中缀表达式包含明确的括号
> 样例输入：- 1 + 13 + 6 * (4 + 1)
> 样例输出：42

### 分析

如果上一题的难度是酋长，那么这一题的难度可能是开拓或者天神。

- 开拓方案：将中缀表达式转为后缀表达式，如果你看得懂上一题求值
- 天神方案：徒手解析算术表达式，如果你看得懂 `calculator.py`
